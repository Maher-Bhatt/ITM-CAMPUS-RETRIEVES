<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITM Campus Retrieve - Crypto Crackers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Poppins & Mono -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            /* Cyber Gradient Background */
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #312e81 100%);
            min-height: 100vh;
            overflow-x: hidden;
            color: #f8fafc; 
        }

        /* Canvas Background Layer */
        #canvas-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        /* Glassmorphism Card Style */
        .glass-card {
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }

        .glass-inner {
            background: rgba(255, 255, 255, 0.9);
            color: #1f2937;
        }

        /* Slogan Scanline Animation */
        @keyframes scan {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }
        .animate-scan {
            animation: scan 3s linear infinite;
        }

        /* Float Animation */
        .float { animation: float 6s ease-in-out infinite; }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        /* UI Animations */
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .hidden-section { display: none; }
        .btn-animate { transition: all 0.3s ease; position: relative; overflow: hidden; z-index: 1; }
        .btn-animate:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.4); }

        /* Toast Animations */
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideOut { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }
        .toast-enter { animation: slideIn 0.3s ease-out forwards; }
        .toast-exit { animation: slideOut 0.3s ease-in forwards; }
    </style>
</head>
<body class="antialiased">

    <!-- INTERACTIVE BACKGROUND CANVAS -->
    <canvas id="canvas-bg"></canvas>

    <!-- Navigation -->
    <nav class="glass-card sticky top-0 z-40 border-b border-white/10">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div class="flex items-center cursor-pointer group" onclick="showSection('home')">
                <div class="relative">
                    <div class="absolute -inset-1 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full blur opacity-40 group-hover:opacity-100 transition duration-500"></div>
                    <div class="relative w-12 h-12 rounded-full border-2 border-white/20 bg-slate-900 shadow-md flex items-center justify-center overflow-hidden">
                        <i class="fas fa-shield-alt text-cyan-400 text-2xl"></i>
                    </div>
                </div>
                <div class="ml-3">
                    <h1 class="font-bold text-xl tracking-wide text-white">ITM CAMPUS RETRIEVE</h1>
                    <p class="text-xs text-cyan-400 font-medium tracking-wider">TEAM CRYPTO CRACKERS</p>
                </div>
            </div>
            <div class="hidden md:flex space-x-8 items-center">
                <button onclick="showSection('home')" class="text-gray-300 font-semibold hover:text-white transition-colors relative group">
                    Home
                    <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-cyan-400 transition-all group-hover:w-full"></span>
                </button>
                <button onclick="showSection('report-lost')" class="text-gray-300 font-semibold hover:text-red-400 transition-colors relative group">
                    Report Lost
                    <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-red-400 transition-all group-hover:w-full"></span>
                </button>
                <button onclick="showSection('report-found')" class="text-gray-300 font-semibold hover:text-emerald-400 transition-colors relative group">
                    Report Found
                    <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-emerald-400 transition-all group-hover:w-full"></span>
                </button>
                
                <!-- ADMIN LOGIN BUTTON -->
                <a href="adminlogin.html" class="ml-4 flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 text-cyan-400 font-bold text-xs hover:bg-cyan-500 hover:text-white hover:border-cyan-500 transition-all duration-300 shadow-[0_0_10px_rgba(6,182,212,0.1)] hover:shadow-[0_0_20px_rgba(6,182,212,0.4)]">
                    <i class="fas fa-user-shield"></i>
                    <span>ADMIN</span>
                </a>
            </div>
            <button class="md:hidden text-2xl text-white" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <div id="mobile-menu" class="hidden bg-slate-900/95 backdrop-blur-md md:hidden absolute w-full border-b border-white/10 shadow-lg z-50">
            <button onclick="showSection('home')" class="block w-full text-left py-3 px-6 hover:bg-white/5 text-gray-200 font-medium border-b border-white/5">Home</button>
            <button onclick="showSection('report-lost')" class="block w-full text-left py-3 px-6 hover:bg-white/5 text-red-400 font-medium border-b border-white/5">Report Lost</button>
            <button onclick="showSection('report-found')" class="block w-full text-left py-3 px-6 hover:bg-white/5 text-emerald-400 font-medium border-b border-white/5">Report Found</button>
            <a href="adminlogin.html" class="block w-full text-left py-3 px-6 hover:bg-white/5 text-cyan-400 font-bold flex items-center gap-2">
                <i class="fas fa-user-shield"></i> Admin Login
            </a>
        </div>
    </nav>

    <!-- MAIN CONTENT AREA -->
    <main class="container mx-auto px-4 py-8 min-h-screen pb-20 relative z-10">

        <!-- SECTION: HOME / DASHBOARD -->
        <section id="home" class="fade-in space-y-10">
            
            <!-- Hero Section -->
            <div class="text-center pt-10 pb-6">
                <div class="float inline-block p-1 rounded-full bg-gradient-to-tr from-cyan-500 to-blue-600 mb-6 shadow-[0_0_30px_rgba(6,182,212,0.5)]">
                    <div class="w-28 h-28 rounded-full border-4 border-slate-900 bg-slate-800 flex items-center justify-center">
                        <i class="fas fa-search-location text-5xl text-cyan-400"></i>
                    </div>
                </div>
                
                <h2 class="text-4xl md:text-6xl font-extrabold text-white mb-4 tracking-tight drop-shadow-lg">Lost something on <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">Campus?</span></h2>
                <p class="text-gray-300 text-lg max-w-2xl mx-auto mb-10 font-light">The official smart retrieval system for ITM. Powered by <span class="text-purple-400 font-bold">Gemini AI</span> to match items instantly.</p>
                
                <div class="flex flex-col sm:flex-row justify-center gap-6">
                    <button onclick="showSection('report-lost')" class="btn-animate bg-gradient-to-r from-red-500 to-pink-600 text-white px-10 py-4 rounded-2xl shadow-lg shadow-red-500/30 flex items-center justify-center gap-3 text-lg font-bold">
                        <i class="fas fa-search text-xl"></i> I LOST SOMETHING
                    </button>
                    <button onclick="showSection('report-found')" class="btn-animate bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-10 py-4 rounded-2xl shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-3 text-lg font-bold">
                        <i class="fas fa-hand-holding-heart text-xl"></i> I FOUND SOMETHING
                    </button>
                </div>
            </div>

            <!-- Stats Overview -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <div class="glass-card p-6 rounded-2xl text-center transform transition hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(0,0,0,0.5)] hover:bg-white/10">
                    <h3 class="text-3xl font-bold text-cyan-400" id="stat-total">0</h3>
                    <p class="text-sm text-gray-300 font-semibold uppercase tracking-wide mt-1">Total Items</p>
                </div>
                <div class="glass-card p-6 rounded-2xl text-center transform transition hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(0,0,0,0.5)] hover:bg-white/10">
                    <h3 class="text-3xl font-bold text-emerald-400" id="stat-found">0</h3>
                    <p class="text-sm text-gray-300 font-semibold uppercase tracking-wide mt-1">Found</p>
                </div>
                <div class="glass-card p-6 rounded-2xl text-center transform transition hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(0,0,0,0.5)] hover:bg-white/10">
                    <h3 class="text-3xl font-bold text-red-400" id="stat-lost">0</h3>
                    <p class="text-sm text-gray-300 font-semibold uppercase tracking-wide mt-1">Lost</p>
                </div>
                <div class="glass-card p-6 rounded-2xl text-center transform transition hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(0,0,0,0.5)] hover:bg-white/10">
                    <h3 class="text-3xl font-bold text-purple-400">24h</h3>
                    <p class="text-sm text-gray-300 font-semibold uppercase tracking-wide mt-1">Avg Time</p>
                </div>
            </div>

            <!-- Live Feed -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Found Items Feed -->
                <div class="glass-card rounded-2xl overflow-hidden border-0">
                    <div class="bg-emerald-900/40 backdrop-blur-sm p-4 border-b border-emerald-500/30 flex justify-between items-center">
                        <h3 class="font-bold text-emerald-400 flex items-center gap-2"><i class="fas fa-check-circle"></i> Recently Found</h3>
                        <span class="px-2 py-1 bg-emerald-500/20 text-emerald-300 text-xs font-bold rounded-full animate-pulse border border-emerald-500/50">LIVE</span>
                    </div>
                    <div id="found-feed" class="divide-y divide-gray-200/10 max-h-96 overflow-y-auto p-2 glass-inner min-h-[200px]">
                        <!-- Content injected by JS -->
                    </div>
                </div>

                <!-- Lost Items Feed -->
                <div class="glass-card rounded-2xl overflow-hidden border-0">
                    <div class="bg-rose-900/40 backdrop-blur-sm p-4 border-b border-rose-500/30 flex justify-between items-center">
                        <h3 class="font-bold text-rose-400 flex items-center gap-2"><i class="fas fa-exclamation-circle"></i> Recently Lost</h3>
                        <span class="px-2 py-1 bg-rose-500/20 text-rose-300 text-xs font-bold rounded-full animate-pulse border border-rose-500/50">LIVE</span>
                    </div>
                    <div id="lost-feed" class="divide-y divide-gray-200/10 max-h-96 overflow-y-auto p-2 glass-inner min-h-[200px]">
                        <!-- Content injected by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: REPORT LOST -->
        <section id="report-lost" class="hidden-section fade-in max-w-3xl mx-auto">
            <button onclick="showSection('home')" class="mb-6 text-white font-bold flex items-center hover:text-cyan-400 transition"><i class="fas fa-arrow-left mr-2"></i> Back to Dashboard</button>
            
            <div class="glass-inner p-8 md:p-10 rounded-3xl shadow-2xl border-t-8 border-red-500">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 flex items-center gap-3">
                    <span class="bg-red-100 text-red-600 p-3 rounded-xl"><i class="fas fa-search"></i></span>
                    Report a Lost Item
                </h2>
                
                <form onsubmit="handleReportSubmit(event, 'lost')" enctype="multipart/form-data">

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Item Name</label>
                            <input type="text" id="lost-name" placeholder="e.g. Blue Water Bottle" required class="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition text-lg">
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Category</label>
                            <div class="relative">
                                <select id="lost-category" class="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 outline-none appearance-none text-lg">
                                    <option>Electronics</option>
                                    <option>Documents</option>
                                    <option>Clothing</option>
                                    <option>Keys/Wallet</option>
                                    <option>Other</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-2 mb-8">
                        <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Last Seen Location</label>
                        <div class="relative">
                            <i class="fas fa-map-marker-alt absolute left-4 top-4 text-gray-400 text-xl"></i>
                            <input type="text" id="lost-location" placeholder="e.g. Library 2nd Floor, Table 4" required class="w-full pl-12 p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 outline-none text-lg transition">
                        </div>
                    </div>

                    <div class="space-y-2 mb-8">
                        <div class="flex justify-between items-center">
                            <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Description</label>
                            <button type="button" onclick="enhanceDescription()" class="btn-animate text-xs bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition flex items-center font-bold">
                                <i class="fas fa-magic mr-2"></i> AI Enhance
                            </button>
                        </div>
                        <textarea id="lost-desc" rows="4" placeholder="Type a rough description (e.g. 'black bag with laptop') and click 'AI Enhance'..." class="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 outline-none transition text-lg resize-none"></textarea>
                        <div id="enhance-loading" class="hidden text-sm text-purple-600 mt-2 font-medium flex items-center animate-pulse"><span class="loader w-4 h-4 border-purple-500 mr-2"></span> Gemini is polishing your description...</div>
                    </div>

                    <div class="space-y-2 mb-8">
                        <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Upload Image (Optional)</label>
                        <div class="relative">
                            <input type="file" id="lost-image" accept="image/*" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-xl text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-bold file:bg-red-50 file:text-red-700 hover:file:bg-red-100 transition">
                        </div>
                        <p class="text-xs text-gray-500 mt-1">If you have an old photo of the lost item, it helps finding it.</p>
                    </div>

                    <div class="space-y-2 mb-10">
                        <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Your Contact Email</label>
                        <input type="email" id="lost-email" placeholder="name@example.com" required class="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 outline-none transition text-lg">
                    </div>

                    <button type="submit" class="btn-animate w-full bg-gradient-to-r from-red-500 to-pink-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-red-500/40 text-xl tracking-wide">
                        SUBMIT REPORT
                    </button>
                </form>
            </div>
        </section>

        <!-- SECTION: REPORT FOUND -->
        <section id="report-found" class="hidden-section fade-in max-w-3xl mx-auto">
            <button onclick="showSection('home')" class="mb-6 text-white font-bold flex items-center hover:text-cyan-400 transition"><i class="fas fa-arrow-left mr-2"></i> Back to Dashboard</button>
            
            <div class="glass-inner p-8 md:p-10 rounded-3xl shadow-2xl border-t-8 border-emerald-500">
                <h2 class="text-3xl font-bold text-gray-800 mb-4 flex items-center gap-3">
                    <span class="bg-emerald-100 text-emerald-600 p-3 rounded-xl"><i class="fas fa-hand-holding-heart"></i></span>
                    Report a Found Item
                </h2>
                <p class="text-gray-500 mb-8 ml-14">Thank you for your honesty. Let's find the owner.</p>
                
                <form onsubmit="handleReportSubmit(event, 'found')" enctype="multipart/form-data">

                    
                    <div class="mb-10 bg-gradient-to-br from-slate-50 to-slate-100 p-6 rounded-2xl border border-slate-200 relative overflow-hidden">
                        <div class="absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-blue-200 rounded-full opacity-50 blur-xl"></div>
                        <label class="block text-lg font-bold text-slate-800 mb-4 flex items-center gap-2"><i class="fas fa-robot text-blue-600"></i> AI Auto-Fill (Optional)</label>
                        
                        <div class="flex flex-col sm:flex-row items-center gap-4">
                            <label class="cursor-pointer w-full sm:w-auto">
                                <span class="btn-animate bg-white text-blue-600 border-2 border-blue-200 px-6 py-3 rounded-xl font-bold shadow-sm hover:border-blue-400 flex items-center justify-center gap-2">
                                    <i class="fas fa-image"></i> Choose Photo
                                </span>
                                <input type="file" id="image-upload" accept="image/*" class="hidden">
                            </label>
                            
                            <button type="button" onclick="analyzeImage()" class="w-full sm:w-auto btn-animate bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-3 rounded-xl shadow-lg shadow-blue-500/30 font-bold flex items-center justify-center gap-2">
                                <i class="fas fa-camera-retro"></i> Analyze with AI
                            </button>
                        </div>
                        <p class="text-xs text-slate-500 mt-3 font-medium ml-1">Supports JPG, PNG. Gemini Vision will extract details automatically.</p>
                        <div id="vision-loading" class="hidden text-sm text-blue-700 mt-4 font-bold flex items-center animate-pulse bg-blue-100 inline-block px-3 py-1 rounded-lg">
                            <span class="loader w-4 h-4 border-blue-600 mr-2"></span> Analyzing visual data...
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Item Name</label>
                            <input type="text" id="found-name" placeholder="e.g. Black Umbrella" required class="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none transition text-lg">
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Category</label>
                            <div class="relative">
                                <select id="found-category" class="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none appearance-none text-lg bg-white">
                                    <option value="Electronics">Electronics</option>
                                    <option value="Documents">Documents</option>
                                    <option value="Clothing">Clothing</option>
                                    <option value="Keys/Wallet">Keys/Wallet</option>
                                    <option value="Other">Other</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-2 mb-8">
                        <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Description</label>
                        <textarea id="found-desc" rows="3" placeholder="Auto-filled by AI or type manually..." class="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none transition text-lg resize-none"></textarea>
                    </div>

                    <div class="space-y-2 mb-8">
                        <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Found Location</label>
                        <input type="text" id="found-location" placeholder="e.g. Canteen Table" required class="w-full pl-12 p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none text-lg transition">
                    </div>

                    <div class="space-y-2 mb-8">
                        <label class="text-sm font-bold text-gray-700 uppercase tracking-wider">Your Email</label>
                        <input type="email" id="found-email" placeholder="Required for Admin verification" required class="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none transition text-lg">
                    </div>

                    <div class="mb-10 bg-yellow-50/80 border border-yellow-200 p-6 rounded-2xl">
                        <label class="block text-base font-bold text-yellow-800 mb-3 flex items-center"><i class="fas fa-lock mr-2 text-yellow-600"></i> Security Question (Crucial)</label>
                        <p class="text-sm text-gray-600 mb-4">Provide a detail NOT visible in photos (e.g., wallpaper, scratch, content) for owner verification.</p>
                        <input type="text" placeholder="e.g. What is the image on the lock screen?" required class="w-full p-4 bg-white border border-yellow-300 rounded-xl focus:ring-2 focus:ring-yellow-500 outline-none shadow-sm text-lg">
                    </div>

                    <button type="submit" class="btn-animate w-full bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-emerald-500/40 text-xl tracking-wide">
                        SECURE ITEM
                    </button>
                </form>
            </div>
        </section>
    </main>

    <!-- TEAM FOOTER -->
    <footer class="relative z-10 border-t border-white/10 bg-slate-900/90 backdrop-blur-md mt-8">
        <div class="container mx-auto px-6 py-6">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4 mb-4">
                <!-- Brand Identity -->
                <div class="text-center md:text-left">
                    <div class="flex items-center justify-center md:justify-start gap-3 mb-1">
                        <div class="p-2 bg-white/5 rounded-lg border border-white/10 shadow-lg shadow-cyan-500/10">
                            <i class="fas fa-code text-cyan-400 text-xl"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 tracking-wider">CRYPTO CRACKERS</h3>
                    </div>
                    
                    <!-- Compact Slogan -->
                    <div class="mt-1 inline-block group cursor-default scale-90 origin-left">
                        <div class="relative overflow-hidden rounded-md bg-black/60 border border-green-500/30 px-3 py-1 shadow-[0_0_10px_rgba(34,197,94,0.1)] transition-all duration-300 hover:border-green-500/60">
                            <div class="absolute inset-0 bg-gradient-to-b from-transparent via-green-500/5 to-transparent opacity-20 animate-scan"></div>
                            <div class="flex items-center gap-2 relative z-10">
                                <span class="relative flex h-2 w-2">
                                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                                  <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                                </span>
                                <div class="font-mono text-[10px] text-green-400 font-medium tracking-wider">
                                    <span class="mr-1">>_</span>"WE SLEEP WHEN IT DEPLOYED"
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

               <!-- Team Members (Compact) -->
<div class="flex flex-wrap justify-center gap-6">

    <!-- Member 1 -->
    <a href="https://maher-portfolio-two.vercel.app/" target="_blank"
       class="flex items-center gap-2 group cursor-pointer">
        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white text-xs font-bold shadow-lg shadow-blue-500/20 group-hover:scale-110 transition-transform">
            MB
        </div>
        <div class="text-left">
            <p class="text-xs font-bold text-gray-200 group-hover:text-cyan-400 transition-colors">
                Maher Bhatt
            </p>
            <p class="text-[9px] text-cyan-400 font-medium uppercase tracking-wider shadow-cyan-500/50">
                Frontend
            </p>
        </div>
    </a>

    <!-- Member 2 -->
    <a href="https://www.linkedin.com/in/shlok-purani-839072342 " target="_blank"
       class="flex items-center gap-2 group cursor-pointer">
        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center text-white text-xs font-bold shadow-lg shadow-purple-500/20 group-hover:scale-110 transition-transform">
            SP
        </div>
        <div class="text-left">
            <p class="text-xs font-bold text-gray-200 group-hover:text-purple-400 transition-colors">
                Shlok Purani
            </p>
            <p class="text-[9px] text-purple-400 font-medium uppercase tracking-wider shadow-purple-500/50">
                Backend
            </p>
        </div>
    </a>

</div>


            <!-- Bottom Bar -->
            <div class="border-t border-white/5 pt-4 flex flex-col md:flex-row justify-between items-center gap-2">
                <p class="text-[10px] text-gray-400">© 2025 ITM Campus Retrieve</p>
                <button onclick="document.getElementById('apikey-modal').classList.remove('hidden')" class="text-[10px] text-gray-400 hover:text-white transition flex items-center gap-1 px-2 py-1 rounded hover:bg-white/5">
                    <i class="fas fa-cog"></i> Configure AI
                </button>
            </div>
        </div>
    </footer>

    <!-- TOAST CONTAINER -->
    <div id="toast-container" class="fixed bottom-5 right-5 z-50 flex flex-col gap-3 pointer-events-none"></div>

    <!-- MODALS -->

    <!-- Match Detected Modal -->
    <div id="notification-modal" class="fixed inset-0 bg-black/80 backdrop-blur-md hidden flex items-center justify-center z-50">
        <div class="glass-inner p-8 rounded-3xl shadow-2xl max-w-md w-full mx-4 animate-bounce-in relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-green-400 to-blue-500"></div>
            <div class="text-center mb-6">
                <div class="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4 shadow-inner">
                    <i class="fas fa-bell"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800">Match Detected!</h3>
                <p class="text-gray-500 mt-2 font-medium">We found an item that matches your description.</p>
            </div>
            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100 mb-8">
                <div class="flex justify-between mb-2">
                    <span class="text-gray-500 text-sm font-bold uppercase">Item</span>
                    <span class="text-gray-800 font-bold" id="match-name">--</span>
                </div>
                <div class="flex justify-between mb-2">
                    <span class="text-gray-500 text-sm font-bold uppercase">Location</span>
                    <span class="text-gray-800 font-bold" id="match-loc">--</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-500 text-sm font-bold uppercase">Time</span>
                    <span class="text-gray-800 font-bold" id="match-time">--</span>
                </div>
            </div>
            <div class="flex gap-4">
                <button onclick="closeModal()" class="flex-1 bg-gray-100 text-gray-600 py-3 rounded-xl font-bold hover:bg-gray-200 transition">Ignore</button>
                <button onclick="closeModal()" class="flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl font-bold hover:shadow-lg transition">Claim Item</button>
            </div>
        </div>
    </div>

    <!-- Claim Modal -->
    <div id="claim-modal" class="fixed inset-0 bg-black/80 backdrop-blur-md hidden flex items-center justify-center z-50">
        <div class="glass-inner p-8 rounded-3xl shadow-2xl max-w-md w-full mx-4 animate-bounce-in relative overflow-hidden">
             <h3 class="text-2xl font-bold text-gray-800 mb-4">Claim Item</h3>
             <p class="text-gray-600 mb-4 text-sm">Draft a message to the finder to arrange a meetup.</p>
             
             <div class="mb-4">
                <div class="flex justify-between items-center mb-2">
                    <label class="text-sm font-bold text-gray-700">Message to Finder</label>
                    <button onclick="draftClaimMessage()" class="text-xs bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-3 py-1 rounded-full font-bold flex items-center hover:shadow-lg transition">
                        <i class="fas fa-magic mr-1"></i> ✨ AI Auto-Draft
                    </button>
                </div>
                <textarea id="claim-message" rows="5" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none text-sm" placeholder="Hi, I think this is mine..."></textarea>
                <div id="draft-loading" class="hidden text-xs text-purple-600 mt-2 font-medium animate-pulse">Gemini is writing a professional message...</div>
             </div>

             <div class="flex gap-4">
                <button onclick="document.getElementById('claim-modal').classList.add('hidden')" class="flex-1 bg-gray-100 text-gray-600 py-3 rounded-xl font-bold hover:bg-gray-200 transition">Cancel</button>
                <button onclick="sendClaim()" class="flex-1 bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition">Send Request</button>
            </div>
        </div>
    </div>

    <!-- Submission Instruction Modal -->
    <div id="submission-modal" class="fixed inset-0 bg-black/80 backdrop-blur-md hidden flex items-center justify-center z-50">
        <div class="glass-inner p-8 rounded-3xl shadow-2xl max-w-md w-full mx-4 animate-bounce-in relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-emerald-400 to-teal-500"></div>
            <div class="text-center mb-6">
                <div class="w-20 h-20 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4 shadow-inner">
                    <i class="fas fa-building"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800">Submission Required</h3>
                <p class="text-gray-500 mt-2 font-medium">Please do not keep the item.</p>
            </div>
            
            <div class="bg-emerald-50 p-5 rounded-xl border border-emerald-100 mb-8 text-center">
                <p class="text-emerald-800 font-bold mb-2 uppercase text-xs tracking-wider">Submit Item To</p>
                <p class="text-2xl font-bold text-gray-800">EB Building</p>
                <p class="text-xl text-blue-600 font-bold">Room EB-42</p>
                <p class="text-xs text-gray-500 mt-2">(Admin will handle verification & matching)</p>
            </div>

            <button onclick="closeSubmissionModal()" class="w-full bg-gradient-to-r from-emerald-500 to-teal-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transition text-lg">
                I Will Submit It
            </button>
        </div>
    </div>

    <!-- API Key Modal -->
    <div id="apikey-modal" class="fixed inset-0 bg-black/80 backdrop-blur-md hidden flex items-center justify-center z-50">
        <div class="glass-inner p-8 rounded-2xl shadow-2xl max-w-sm w-full mx-4">
            <h3 class="font-bold text-xl mb-2 text-gray-800">Gemini API Key</h3>
            <p class="text-sm text-gray-500 mb-6">Required to enable AI Enhancement & Vision features.</p>
            <input type="password" id="user-api-key" placeholder="Paste your key here..." class="w-full p-3 bg-gray-50 border border-gray-300 rounded-lg mb-6 focus:ring-2 focus:ring-blue-500 outline-none">
            <div class="flex justify-end gap-3">
                <button onclick="document.getElementById('apikey-modal').classList.add('hidden')" class="text-gray-500 px-4 py-2 hover:bg-gray-100 rounded-lg font-medium">Cancel</button>
                <button onclick="saveApiKey()" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700 shadow-lg shadow-blue-500/30">Save Key</button>
            </div>
        </div>
    </div>

    <script>
        // --- GLOBAL SETTINGS ---
        const apiKey = ""; // Initial empty key
        let userKey = localStorage.getItem("gemini_key") || apiKey;
        let currentClaimItem = null;

        // --- CANVAS BACKGROUND EFFECT (Cyber-Particles) ---
        const canvas = document.getElementById('canvas-bg');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 1;
                this.vy = (Math.random() - 0.5) * 1;
                this.size = Math.random() * 2 + 1;
                this.color = `rgba(${Math.random() > 0.5 ? '6, 182, 212' : '59, 130, 246'}, ${Math.random() * 0.5 + 0.1})`;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function initParticles() {
            particles = [];
            for (let i = 0; i < 100; i++) particles.push(new Particle());
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                p.update();
                p.draw();
                particles.forEach(p2 => {
                    const dx = p.x - p2.x;
                    const dy = p.y - p2.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    if (dist < 100) {
                        ctx.strokeStyle = `rgba(100, 116, 139, ${0.1 - dist/1000})`;
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(p.x, p.y);
                        ctx.lineTo(p2.x, p2.y);
                        ctx.stroke();
                    }
                });
            });
            requestAnimationFrame(animateParticles);
        }
        initParticles();
        animateParticles();

        // --- HELPER: Base64 ---
        const getBase64 = (file) => new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => resolve(reader.result);
            reader.onerror = error => reject(error);
        });

        // --- DATA STORAGE ---
        let foundItems = [];
        let lostItems = [];

        function loadData() {
            const storedFound = localStorage.getItem('foundItems');
            const storedLost = localStorage.getItem('lostItems');

            // Load existing data if available, otherwise start empty
            if (storedFound) {
                foundItems = JSON.parse(storedFound);
            } else {
                foundItems = []; // Start empty
            }

            if (storedLost) {
                lostItems = JSON.parse(storedLost);
            } else {
                lostItems = []; // Start empty
            }
            
            updateStats();
        }

        function saveData() {
            localStorage.setItem('foundItems', JSON.stringify(foundItems));
            localStorage.setItem('lostItems', JSON.stringify(lostItems));
            updateStats();
        }

        function updateStats() {
            document.getElementById('stat-found').innerText = foundItems.length;
            document.getElementById('stat-lost').innerText = lostItems.length;
            document.getElementById('stat-total').innerText = foundItems.length + lostItems.length;
        }

        // --- TOAST NOTIFICATION SYSTEM ---
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            
            const bgClass = type === 'success' ? 'bg-gradient-to-r from-emerald-500 to-teal-600' : 
                            type === 'error' ? 'bg-gradient-to-r from-red-500 to-pink-600' :
                            'bg-gradient-to-r from-blue-500 to-indigo-600';
            
            const icon = type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle';
            
            toast.className = `pointer-events-auto flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white font-bold min-w-[300px] backdrop-blur-md toast-enter ${bgClass}`;
            
            toast.innerHTML = `
                <i class="fas fa-${icon} text-xl"></i>
                <span>${message}</span>
            `;

            container.appendChild(toast);

            setTimeout(() => {
                toast.classList.remove('toast-enter');
                toast.classList.add('toast-exit');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // --- GEMINI API LOGIC ---

        async function callGeminiAPI(prompt, isImage = false, imageData = null) {
            if (!userKey) {
                showToast("Please configure API Key in settings first!", "info");
                return null;
            }

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${userKey}`;
            
            let parts = [{ text: prompt }];
            if (isImage && imageData) {
                parts.push({
                    inlineData: {
                        mimeType: "image/jpeg",
                        data: imageData
                    }
                });
            }

            const payload = { contents: [{ parts: parts }] };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) throw new Error(`API Error: ${response.status}`);
                
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text;
            } catch (error) {
                console.error("Gemini API Error:", error);
                showToast("Gemini Connection Failed", "error");
                return null;
            }
        }

        // --- FEATURE 1: DESCRIPTION ENHANCER ---
        async function enhanceDescription() {
            const descField = document.getElementById('lost-desc');
            const originalText = descField.value;
            if (!originalText) {
                showToast("Please type a rough description first!", "error");
                return;
            }

            const loader = document.getElementById('enhance-loading');
            loader.classList.remove('hidden');

            const prompt = `Rewrite this lost item description to be clear, detailed, and professional for a formal Lost & Found report. Keep it under 30 words. Input: "${originalText}"`;
            
            const result = await callGeminiAPI(prompt);
            
            loader.classList.add('hidden');
            if (result) {
                descField.value = result.trim();
                showToast("Description Enhanced!", "success");
            }
        }

        // --- FEATURE 2: VISION ANALYSIS ---
        async function analyzeImage() {
            const fileInput = document.getElementById('image-upload');
            const file = fileInput.files[0];
            
            if (!file) {
                showToast("Please select an image first.", "error");
                return;
            }

            const loader = document.getElementById('vision-loading');
            loader.classList.remove('hidden');

            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = async function () {
                const base64String = reader.result.split(',')[1]; 
                
                const prompt = `Analyze this image of a found item. Identify the item name, best category (choose exactly one from: Electronics, Documents, Clothing, Keys/Wallet, Other), and a brief description. 
                Return strictly valid JSON in this format: { "name": "Example Item", "category": "Electronics", "description": "A black item..." } Do not use markdown blocks.`;

                const result = await callGeminiAPI(prompt, true, base64String);
                
                loader.classList.add('hidden');

                if (result) {
                    try {
                        const cleanJson = result.replace(/```json/g, '').replace(/```/g, '').trim();
                        const data = JSON.parse(cleanJson);
                        
                        document.getElementById('found-name').value = data.name || "";
                        document.getElementById('found-desc').value = data.description || "";
                        
                        const catSelect = document.getElementById('found-category');
                        for (let i = 0; i < catSelect.options.length; i++) {
                            if (catSelect.options[i].value === data.category) {
                                catSelect.selectedIndex = i;
                                break;
                            }
                        }
                        showToast("AI Identified the Item!", "success");

                    } catch (e) {
                        console.error("Parsing Error", e);
                        showToast("AI Error: Could not parse data.", "error");
                    }
                }
            };
        }

        // --- FEATURE 3: SMART SEMANTIC MATCHING ---
        async function checkForMatches(lostItemName, lostItemDesc) {
            if (foundItems.length === 0) return;

            const candidates = foundItems.slice(0, 5).map((item, index) => `${index}: ${item.name} (${item.desc})`).join("\n");
            
            const prompt = `I am a lost and found system. 
            Lost Item: "${lostItemName} - ${lostItemDesc}"
            Recent Found Items:
            ${candidates}
            
            Task: Does the lost item semantically match any of the found items? (e.g. "MacBook" matches "Laptop").
            If yes, return the index number ONLY (e.g. "2"). If no match, return "null".`;

            const result = await callGeminiAPI(prompt);
            
            if (result && result.trim() !== "null") {
                const index = parseInt(result.trim());
                if (!isNaN(index) && foundItems[index]) {
                    const match = foundItems[index];
                    document.getElementById('match-name').innerText = match.name;
                    document.getElementById('match-loc').innerText = match.loc;
                    document.getElementById('match-time').innerText = match.date;
                    document.getElementById('notification-modal').classList.remove('hidden');
                }
            }
        }

        // --- FEATURE 4: CLAIM MESSAGE DRAFTER ---
        function openClaimModal(index) {
            currentClaimItem = foundItems[index];
            document.getElementById('claim-message').value = "";
            document.getElementById('claim-modal').classList.remove('hidden');
        }

        async function draftClaimMessage() {
            if (!currentClaimItem) return;
            
            const loader = document.getElementById('draft-loading');
            loader.classList.remove('hidden');

            const prompt = `Draft a polite, professional short message from a student to claim a lost item.
            Item: ${currentClaimItem.name}
            Found at: ${currentClaimItem.loc}
            Context: I want to arrange a meetup to verify ownership.
            Tone: Friendly but concise. No placeholders.`;

            const result = await callGeminiAPI(prompt);
            loader.classList.add('hidden');
            
            if (result) {
                document.getElementById('claim-message').value = result.trim();
            }
        }

        function sendClaim() {
            document.getElementById('claim-modal').classList.add('hidden');
            showToast("Request Sent to Finder! Check your email.", "success");
        }

        // --- STANDARD APP FUNCTIONS ---

        function saveApiKey() {
            const input = document.getElementById('user-api-key').value;
            if(input) {
                userKey = input;
                localStorage.setItem("gemini_key", input);
                document.getElementById('apikey-modal').classList.add('hidden');
                showToast("API Key Saved!", "success");
            }
        }

        function renderFeed() {
            const foundContainer = document.getElementById('found-feed');
            const lostContainer = document.getElementById('lost-feed');

            foundContainer.innerHTML = foundItems.length === 0 ? 
                '<p class="text-center text-gray-400 py-4">No found items yet.</p>' :
                foundItems.map((item, index) => `
                <div class="p-4 flex justify-between items-center hover:bg-white/5 transition border-b border-gray-200/10 last:border-0">
                    <div class="flex items-start gap-3">
                        <div class="bg-emerald-500/20 p-2 rounded-lg text-emerald-400"><i class="fas fa-box"></i></div>
                        <div>
                            <p class="font-bold text-gray-200 text-sm">${item.name}</p>
                            <p class="text-xs text-gray-400 mt-1"><i class="fas fa-map-marker-alt mr-1"></i>${item.loc} &bull; ${item.date}</p>
                        </div>
                    </div>
                    <button onclick="openClaimModal(${index})" class="px-3 py-1 bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 text-xs rounded-lg font-bold shadow-sm hover:bg-emerald-500 hover:text-white cursor-pointer transition">Claim</button>
                </div>
            `).join('');

            lostContainer.innerHTML = lostItems.length === 0 ? 
                '<p class="text-center text-gray-400 py-4">No lost items reported.</p>' :
                lostItems.map(item => `
                <div class="p-4 flex justify-between items-center hover:bg-white/5 transition border-b border-gray-200/10 last:border-0">
                    <div class="flex items-start gap-3">
                        <div class="bg-red-500/20 p-2 rounded-lg text-red-400 flex-shrink-0">
                            <i class="fas fa-search"></i>
                        </div>
                        <div class="flex-grow">
                            <p class="font-bold text-gray-200 text-sm">${item.name}</p>
                            <p class="text-xs text-gray-400 mt-1"><i class="fas fa-map-marker-alt mr-1"></i>${item.loc} &bull; ${item.date}</p>
                        </div>
                        ${item.image ? `<img src="${item.image}" class="w-12 h-12 rounded-lg object-cover border border-white/20 ml-2">` : ''}
                    </div>
                    <span class="px-3 py-1 bg-white/10 text-gray-400 text-xs rounded-lg font-bold ml-2">Pending</span>
                </div>
            `).join('');
        }

        function showSection(sectionId) {
            document.querySelectorAll('main > section').forEach(el => el.classList.add('hidden-section'));
            document.getElementById(sectionId).classList.remove('hidden-section');
            document.getElementById('mobile-menu').classList.add('hidden');
            window.scrollTo(0, 0);
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        async function handleReportSubmit(event, type) {
            event.preventDefault();
            
            const dateStr = new Date().toLocaleDateString() + " " + new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

            if (type === 'lost') {
                const name = document.getElementById('lost-name').value;
                const loc = document.getElementById('lost-location').value;
                const cat = document.getElementById('lost-category').value;
                const desc = document.getElementById('lost-desc').value;
                const email = document.getElementById('lost-email').value;
                
                // Handle Image Upload
                const imageInput = document.getElementById('lost-image');
                let imageData = null;
                if (imageInput.files.length > 0) {
                    try {
                        imageData = await getBase64(imageInput.files[0]);
                    } catch (e) {
                        console.error("Image read error", e);
                    }
                }

                lostItems.unshift({
                    name: name,
                    loc: loc,
                    date: dateStr,
                    cat: cat,
                    desc: desc,
                    email: email,
                    image: imageData // Store base64 image
                });
                saveData();
                showToast("Report Submitted! AI is scanning for matches...", "info");
                
                await checkForMatches(name, desc);

            } else {
                const name = document.getElementById('found-name').value;
                const loc = document.getElementById('found-location').value;
                const cat = document.getElementById('found-category').value;
                const desc = document.getElementById('found-desc').value;
                const email = document.getElementById('found-email').value;

                foundItems.unshift({
                    name: name,
                    loc: loc,
                    date: dateStr,
                    cat: cat,
                    desc: desc,
                    email: email
                });
                saveData();
                
                document.getElementById('submission-modal').classList.remove('hidden');
            }
            
            renderFeed();
            event.target.reset();
        }

        function closeModal() {
            document.getElementById('notification-modal').classList.add('hidden');
            showSection('home');
        }
        
        function closeSubmissionModal() {
            document.getElementById('submission-modal').classList.add('hidden');
            showToast("Thanks! Please head to EB-42.", "success");
            showSection('home');
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            renderFeed();
        });
    </script>
</body>
</html>